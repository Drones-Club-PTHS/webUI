<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<title>Drenes club - Manage Logins</title>
	<meta name='viewport' content='width=device-width, initial-scale=1'>
	<script src="../clear_localStorage.js"></script>
	<link rel="stylesheet" href="../0_table/table.css">
	<style>
		#main-form {
			display: grid;
			grid-template-columns: max-content 1fr;
			max-width: 30em;
			gap: 0.3em;
		}
		#main-form > label {
			padding-right: 0.5em;
			padding-bottom: 0.5em;
			vertical-align: top;
			text-align: right;
		}
		textarea.main-input {
			resize: none;
			field-sizing: content;
		}
		.main-input {
			width: auto;
		}
		.main-input.edited {
			background-color: red;
		}
		.submit-button {
			grid-column: 1 / -1;
			justify-self: center;
		}
	</style>
	<script>
		/* localStorage:
		github-name
		github-email
		github-token
		*/
		function onFormSubmit(event) {
			console.log("submit")
			event.preventDefault();
			for (const input of event.target.querySelectorAll(".main-input")) {
				localStorage.setItem(input.id, input.value);
				input.classList.remove("edited");
			}
		}
		function onInput(event) {
			if (event.target.value == localStorage.getItem(event.target.id)) {
				event.target.classList.remove("edited");
			} else {
				event.target.classList.add("edited");
			}
		}
	</script>
</head>
<body>
	<form id="main-form" onsubmit="onFormSubmit(event)"> 
		<!-- github-name -->
		<label for="github-name">Name:</label>
		<input class="main-input" type="text" id="github-name" oninput="onInput(event)">
		<!-- github-email -->
		<label for="github-email">Email:</label>
		<input class="main-input" type="text" id="github-email" oninput="onInput(event)">
		<!-- github-token -->
			<label for="github-token">Token:</label>
		<textarea class="main-input" id="github-token" oninput="onInput(event)"></textarea>
		<input class="submit-button" type="submit" value="Save">
	</form>
	<script>
		function fillInputs() {
			const form = document.querySelector("#main-form");
			for (const input of form.querySelectorAll(".main-input")) {
				if (localStorage.getItem(input.id)) {
					input.value = localStorage.getItem(input.id);
				}
			}
		}
		fillInputs();
	</script>
</body>

</html>
